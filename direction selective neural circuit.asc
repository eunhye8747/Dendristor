Version 4
SHEET 1 6188 3672
WIRE 3888 -16 3568 -16
WIRE 736 0 416 0
WIRE 3040 16 2896 16
WIRE 3168 16 3120 16
WIRE 3264 16 3232 16
WIRE -112 32 -256 32
WIRE 16 32 -32 32
WIRE 112 32 80 32
WIRE 3040 128 2752 128
WIRE 3168 128 3120 128
WIRE 3264 128 3264 16
WIRE 3264 128 3232 128
WIRE -112 144 -400 144
WIRE 16 144 -32 144
WIRE 112 144 112 32
WIRE 112 144 80 144
WIRE 3888 144 3888 -16
WIRE 736 160 736 0
WIRE 416 176 416 0
WIRE 4352 176 4128 176
WIRE 1232 192 1008 192
WIRE 3264 192 3264 128
WIRE 3264 192 3136 192
WIRE 3376 192 3264 192
WIRE 3568 192 3568 -16
WIRE 4128 192 4128 176
WIRE 112 208 112 144
WIRE 112 208 -1664 208
WIRE 224 208 112 208
WIRE 1008 208 1008 192
WIRE 3264 224 3264 192
WIRE 112 240 112 208
WIRE 3376 240 3376 192
WIRE 3568 240 3568 192
WIRE 4128 240 4128 192
WIRE 224 256 224 208
WIRE 416 256 416 176
WIRE 1008 256 1008 208
WIRE 3264 256 3264 224
WIRE 112 272 112 240
WIRE 4352 288 4352 176
WIRE 1232 304 1232 192
WIRE 3568 352 3568 320
WIRE 4128 352 4128 320
WIRE 416 368 416 336
WIRE 1008 368 1008 336
WIRE 3264 368 3264 320
WIRE 3376 368 3376 320
WIRE 3376 368 3264 368
WIRE 3568 368 3568 352
WIRE 112 384 112 336
WIRE 224 384 224 336
WIRE 224 384 112 384
WIRE 4128 384 4128 352
WIRE 416 400 416 368
WIRE 1008 400 1008 368
WIRE 3264 400 3264 368
WIRE 3376 400 3264 400
WIRE 112 416 112 384
WIRE 224 416 112 416
WIRE 3376 416 3376 400
WIRE 224 432 224 416
WIRE 3056 432 3056 416
WIRE 3264 432 3264 400
WIRE -96 448 -96 432
WIRE 112 448 112 416
WIRE 3264 512 3264 496
WIRE 3264 512 3056 512
WIRE 3376 512 3376 496
WIRE 3376 512 3264 512
WIRE 3568 512 3568 448
WIRE 3568 512 3376 512
WIRE 3696 512 3568 512
WIRE 3888 512 3888 224
WIRE 3888 512 3696 512
WIRE 4128 512 4128 464
WIRE 4128 512 3888 512
WIRE 4352 512 4352 368
WIRE 4352 512 4128 512
WIRE 112 528 112 512
WIRE 112 528 -96 528
WIRE 224 528 224 512
WIRE 224 528 112 528
WIRE 416 528 416 480
WIRE 416 528 224 528
WIRE 544 528 416 528
WIRE 736 528 736 240
WIRE 736 528 544 528
WIRE 1008 528 1008 480
WIRE 1008 528 736 528
WIRE 1232 528 1232 384
WIRE 1232 528 1008 528
WIRE 2896 688 2896 16
WIRE 3088 688 2896 688
WIRE 3600 688 3088 688
WIRE -256 704 -256 32
WIRE -256 704 -960 704
WIRE -64 704 -256 704
WIRE 448 704 -64 704
WIRE 1152 704 448 704
WIRE 1856 704 1152 704
WIRE 2752 752 2752 128
WIRE 3008 752 2752 752
WIRE 3552 752 3008 752
WIRE -400 768 -400 144
WIRE -400 768 -736 768
WIRE -144 768 -400 768
WIRE 400 768 -144 768
WIRE 1104 768 400 768
WIRE 1808 768 1104 768
WIRE 2672 944 2640 944
WIRE 2768 944 2736 944
WIRE 2944 944 2848 944
WIRE 3088 944 3088 688
WIRE 3088 944 2944 944
WIRE 3328 944 3296 944
WIRE 3424 944 3392 944
WIRE 3600 944 3600 688
WIRE 3600 944 3504 944
WIRE -1264 960 -1600 960
WIRE -1232 960 -1264 960
WIRE -1136 960 -1168 960
WIRE -960 960 -960 704
WIRE -960 960 -1056 960
WIRE -480 960 -512 960
WIRE -384 960 -416 960
WIRE -208 960 -304 960
WIRE -64 960 -64 704
WIRE -64 960 -208 960
WIRE 176 960 144 960
WIRE 272 960 240 960
WIRE 448 960 448 704
WIRE 448 960 352 960
WIRE 880 976 848 976
WIRE 976 976 944 976
WIRE 1152 976 1152 704
WIRE 1152 976 1056 976
WIRE 1584 976 1552 976
WIRE 1680 976 1648 976
WIRE 1856 976 1856 704
WIRE 1856 976 1760 976
WIRE -1600 992 -1600 960
WIRE -1648 1008 -1696 1008
WIRE -1600 1008 -1600 992
WIRE 2640 1008 2640 944
WIRE 3296 1008 3296 944
WIRE -1664 1056 -1664 208
WIRE -1648 1056 -1664 1056
WIRE 2640 1056 2640 1008
WIRE 2672 1056 2640 1056
WIRE 2768 1056 2736 1056
WIRE 2864 1056 2848 1056
WIRE 3008 1056 3008 752
WIRE 3008 1056 2864 1056
WIRE 3296 1056 3296 1008
WIRE 3328 1056 3296 1056
WIRE 3424 1056 3392 1056
WIRE 3520 1056 3504 1056
WIRE 3552 1056 3552 752
WIRE 3552 1056 3520 1056
WIRE -1600 1072 -1600 1056
WIRE -1264 1072 -1264 960
WIRE -1232 1072 -1264 1072
WIRE -1136 1072 -1168 1072
WIRE -1040 1072 -1056 1072
WIRE -736 1072 -736 768
WIRE -736 1072 -1040 1072
WIRE -512 1072 -512 960
WIRE -480 1072 -512 1072
WIRE -384 1072 -416 1072
WIRE -288 1072 -304 1072
WIRE -144 1072 -144 768
WIRE -144 1072 -288 1072
WIRE 144 1072 144 960
WIRE 176 1072 144 1072
WIRE 272 1072 240 1072
WIRE 368 1072 352 1072
WIRE 400 1072 400 768
WIRE 400 1072 368 1072
WIRE 848 1088 848 976
WIRE 880 1088 848 1088
WIRE 976 1088 944 1088
WIRE 1072 1088 1056 1088
WIRE 1104 1088 1104 768
WIRE 1104 1088 1072 1088
WIRE 1552 1088 1552 976
WIRE 1584 1088 1552 1088
WIRE 1680 1088 1648 1088
WIRE 1776 1088 1760 1088
WIRE 1808 1088 1808 768
WIRE 1808 1088 1776 1088
WIRE 2640 1152 2640 1056
WIRE 3296 1152 3296 1056
WIRE -1600 1232 -1600 1072
WIRE -1264 1232 -1600 1232
WIRE 2944 1248 2944 944
WIRE 3600 1248 3600 944
WIRE -960 1264 -960 960
WIRE -208 1264 -208 960
WIRE 448 1264 448 960
WIRE 3296 1264 3296 1232
WIRE 144 1280 144 1072
WIRE 1152 1280 1152 976
WIRE 1856 1280 1856 976
WIRE 2640 1280 2640 1232
WIRE -1264 1296 -1264 1232
WIRE -512 1296 -512 1072
WIRE 2640 1296 2640 1280
WIRE 2864 1296 2864 1056
WIRE 3296 1296 3296 1264
WIRE 3520 1296 3520 1056
WIRE -1264 1312 -1264 1296
WIRE -1040 1312 -1040 1072
WIRE -512 1312 -512 1296
WIRE -288 1312 -288 1072
WIRE 144 1312 144 1280
WIRE 368 1312 368 1072
WIRE 848 1312 848 1088
WIRE 1552 1312 1552 1088
WIRE 848 1328 848 1312
WIRE 1072 1328 1072 1088
WIRE 1552 1328 1552 1312
WIRE 1776 1328 1776 1088
WIRE 2640 1440 2640 1376
WIRE 2640 1440 2352 1440
WIRE 2800 1440 2640 1440
WIRE 2864 1440 2864 1376
WIRE 2864 1440 2800 1440
WIRE 2944 1440 2944 1328
WIRE 2944 1440 2864 1440
WIRE 3296 1440 3296 1376
WIRE 3296 1440 2944 1440
WIRE 3456 1440 3296 1440
WIRE 3520 1440 3520 1376
WIRE 3520 1440 3456 1440
WIRE 3600 1440 3600 1328
WIRE 3600 1440 3520 1440
WIRE 3696 1440 3696 512
WIRE 3696 1440 3600 1440
WIRE -1696 1456 -1696 1008
WIRE -1264 1456 -1264 1392
WIRE -1264 1456 -1696 1456
WIRE -1104 1456 -1264 1456
WIRE -1040 1456 -1040 1392
WIRE -1040 1456 -1104 1456
WIRE -960 1456 -960 1344
WIRE -960 1456 -1040 1456
WIRE -512 1456 -512 1392
WIRE -512 1456 -960 1456
WIRE -352 1456 -512 1456
WIRE -288 1456 -288 1392
WIRE -288 1456 -352 1456
WIRE -208 1456 -208 1344
WIRE -208 1456 -288 1456
WIRE 144 1456 144 1392
WIRE 144 1456 -208 1456
WIRE 304 1456 144 1456
WIRE 368 1456 368 1392
WIRE 368 1456 304 1456
WIRE 448 1456 448 1344
WIRE 448 1456 368 1456
WIRE 544 1456 544 528
WIRE 544 1456 448 1456
WIRE 848 1456 848 1408
WIRE 848 1456 544 1456
WIRE 1008 1456 848 1456
WIRE 1072 1456 1072 1408
WIRE 1072 1456 1008 1456
WIRE 1152 1456 1152 1360
WIRE 1152 1456 1072 1456
WIRE 1552 1456 1552 1408
WIRE 1552 1456 1152 1456
WIRE 1712 1456 1552 1456
WIRE 1776 1456 1776 1408
WIRE 1776 1456 1712 1456
WIRE 1856 1456 1856 1360
WIRE 1856 1456 1776 1456
WIRE 2352 1456 2352 1440
WIRE 2352 1456 1856 1456
WIRE 2800 1472 2800 1440
WIRE 3456 1472 3456 1440
WIRE -1104 1488 -1104 1456
WIRE -352 1488 -352 1456
WIRE 304 1488 304 1456
WIRE 1712 1488 1712 1456
WIRE 1008 1504 1008 1456
WIRE 624 1856 304 1856
WIRE -224 1888 -368 1888
WIRE -96 1888 -144 1888
WIRE 0 1888 -32 1888
WIRE -224 2000 -512 2000
WIRE -96 2000 -144 2000
WIRE 0 2000 0 1888
WIRE 0 2000 -32 2000
WIRE 304 2016 304 1856
WIRE 624 2016 624 1856
WIRE 0 2064 0 2000
WIRE 112 2064 0 2064
WIRE 304 2064 304 2016
WIRE 0 2096 0 2064
WIRE 112 2112 112 2064
WIRE 304 2112 304 2064
WIRE 0 2128 0 2096
WIRE 304 2224 304 2192
WIRE 0 2240 0 2192
WIRE 112 2240 112 2192
WIRE 112 2240 0 2240
WIRE 304 2256 304 2224
WIRE 0 2272 0 2240
WIRE 112 2272 0 2272
WIRE 112 2288 112 2272
WIRE -208 2304 -208 2288
WIRE 0 2304 0 2272
WIRE 0 2384 0 2368
WIRE 0 2384 -208 2384
WIRE 112 2384 112 2368
WIRE 112 2384 0 2384
WIRE 304 2384 304 2336
WIRE 304 2384 112 2384
WIRE 432 2384 304 2384
WIRE 624 2384 624 2096
WIRE 624 2384 432 2384
WIRE -368 2560 -368 1888
WIRE -368 2560 -1072 2560
WIRE -176 2560 -368 2560
WIRE 336 2560 -176 2560
WIRE 1040 2560 336 2560
WIRE 1744 2560 1040 2560
WIRE -512 2624 -512 2000
WIRE -512 2624 -848 2624
WIRE -256 2624 -512 2624
WIRE 288 2624 -256 2624
WIRE 992 2624 288 2624
WIRE 1696 2624 992 2624
WIRE -1344 2816 -1376 2816
WIRE -1248 2816 -1280 2816
WIRE -1072 2816 -1072 2560
WIRE -1072 2816 -1168 2816
WIRE -592 2816 -624 2816
WIRE -496 2816 -528 2816
WIRE -320 2816 -416 2816
WIRE -176 2816 -176 2560
WIRE -176 2816 -320 2816
WIRE 64 2816 32 2816
WIRE 160 2816 128 2816
WIRE 336 2816 336 2560
WIRE 336 2816 240 2816
WIRE 768 2832 736 2832
WIRE 864 2832 832 2832
WIRE 1040 2832 1040 2560
WIRE 1040 2832 944 2832
WIRE 1472 2832 1440 2832
WIRE 1568 2832 1536 2832
WIRE 1744 2832 1744 2560
WIRE 1744 2832 1648 2832
WIRE -1376 2928 -1376 2816
WIRE -1344 2928 -1376 2928
WIRE -1248 2928 -1280 2928
WIRE -1152 2928 -1168 2928
WIRE -848 2928 -848 2624
WIRE -848 2928 -1152 2928
WIRE -624 2928 -624 2816
WIRE -592 2928 -624 2928
WIRE -496 2928 -528 2928
WIRE -400 2928 -416 2928
WIRE -256 2928 -256 2624
WIRE -256 2928 -400 2928
WIRE 32 2928 32 2816
WIRE 64 2928 32 2928
WIRE 160 2928 128 2928
WIRE 256 2928 240 2928
WIRE 288 2928 288 2624
WIRE 288 2928 256 2928
WIRE 736 2944 736 2832
WIRE 768 2944 736 2944
WIRE 864 2944 832 2944
WIRE 960 2944 944 2944
WIRE 992 2944 992 2624
WIRE 992 2944 960 2944
WIRE 1440 2944 1440 2832
WIRE 1472 2944 1440 2944
WIRE 1568 2944 1536 2944
WIRE 1664 2944 1648 2944
WIRE 1696 2944 1696 2624
WIRE 1696 2944 1664 2944
WIRE -1072 3120 -1072 2816
WIRE -320 3120 -320 2816
WIRE 336 3120 336 2816
WIRE 32 3136 32 2928
WIRE 1040 3136 1040 2832
WIRE 1744 3136 1744 2832
WIRE -1376 3152 -1376 2928
WIRE -624 3152 -624 2928
WIRE -1376 3168 -1376 3152
WIRE -1152 3168 -1152 2928
WIRE -624 3168 -624 3152
WIRE -400 3168 -400 2928
WIRE 32 3168 32 3136
WIRE 256 3168 256 2928
WIRE 736 3168 736 2944
WIRE 1440 3168 1440 2944
WIRE 736 3184 736 3168
WIRE 960 3184 960 2944
WIRE 1440 3184 1440 3168
WIRE 1664 3184 1664 2944
WIRE -1376 3312 -1376 3248
WIRE -1216 3312 -1376 3312
WIRE -1152 3312 -1152 3248
WIRE -1152 3312 -1216 3312
WIRE -1072 3312 -1072 3200
WIRE -1072 3312 -1152 3312
WIRE -624 3312 -624 3248
WIRE -624 3312 -1072 3312
WIRE -464 3312 -624 3312
WIRE -400 3312 -400 3248
WIRE -400 3312 -464 3312
WIRE -320 3312 -320 3200
WIRE -320 3312 -400 3312
WIRE 32 3312 32 3248
WIRE 32 3312 -320 3312
WIRE 192 3312 32 3312
WIRE 256 3312 256 3248
WIRE 256 3312 192 3312
WIRE 336 3312 336 3200
WIRE 336 3312 256 3312
WIRE 432 3312 432 2384
WIRE 432 3312 336 3312
WIRE 736 3312 736 3264
WIRE 736 3312 432 3312
WIRE 896 3312 736 3312
WIRE 960 3312 960 3264
WIRE 960 3312 896 3312
WIRE 1040 3312 1040 3216
WIRE 1040 3312 960 3312
WIRE 1440 3312 1440 3264
WIRE 1440 3312 1040 3312
WIRE 1600 3312 1440 3312
WIRE 1664 3312 1664 3264
WIRE 1664 3312 1600 3312
WIRE 1744 3312 1744 3216
WIRE 1744 3312 1664 3312
WIRE 2352 3312 2352 1456
WIRE 2352 3312 1744 3312
WIRE -1216 3344 -1216 3312
WIRE -464 3344 -464 3312
WIRE 192 3344 192 3312
WIRE 1600 3344 1600 3312
WIRE 896 3360 896 3312
FLAG 112 240 gs
FLAG -96 432 T
FLAG 112 416 M
FLAG -352 1488 0
FLAG -512 1296 VA1
FLAG 304 1488 0
FLAG 1008 1504 0
FLAG 848 1312 VA3
FLAG -1104 1488 0
FLAG -1264 1296 VA4
FLAG 1712 1488 0
FLAG 1552 1312 VA5
FLAG 144 1280 VA2
FLAG 304 2064 ds1
FLAG 0 2096 gs1
FLAG -208 2288 T1
FLAG 0 2272 M1
FLAG -464 3344 0
FLAG -624 3152 VA6
FLAG 192 3344 0
FLAG 896 3360 0
FLAG 736 3168 VA8
FLAG -1216 3344 0
FLAG -1376 3152 VA9
FLAG 1600 3344 0
FLAG 1440 3168 VA10
FLAG 32 3136 VA7
FLAG 416 176 ds
FLAG 304 2016 ds1
FLAG 3296 1008 N2
FLAG 3568 192 ds2
FLAG 3264 224 gs2
FLAG 3056 416 T2
FLAG 3264 400 M2
FLAG 2800 1472 0
FLAG 2640 1280 VA11
FLAG 3456 1472 0
FLAG 3296 1264 VA12
FLAG 416 368 R0
FLAG 2640 1008 N1I
FLAG 304 2224 R10
FLAG 4128 352 VA13
FLAG 4128 192 N3
FLAG 3568 352 R22
FLAG 1008 368 VA14
FLAG 1008 208 N1
SYMBOL voltage 736 144 R0
SYMATTR InstName Vd
SYMATTR Value 0.5V
SYMBOL bi 416 256 R0
WINDOW 3 -33 -165 Left 2
SYMATTR InstName Id
SYMATTR Value I=if (V(gs)-V(T)>V(ds),  Km*(2*(V(gs)-V(T))-V(ds))*V(ds), (if ( V(gs)>V(T), Km*(V(gs)-V(T))*(V(gs)-V(T)), 0)))
SYMBOL cap 96 272 R0
SYMATTR InstName C1
SYMATTR Value {c1}
SYMBOL cap 96 448 R0
SYMATTR InstName C2
SYMATTR Value {c2}
SYMBOL diode 16 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName Dp
SYMATTR Value DiodeNRD
SYMBOL res -16 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs
SYMATTR Value 400Meg
SYMBOL res 208 240 R0
SYMATTR InstName Rr
SYMATTR Value 29Meg
SYMBOL res 208 416 R0
SYMATTR InstName RM
SYMATTR Value 300Meg
SYMBOL bv -96 432 R0
WINDOW 3 -1 131 Left 2
SYMATTR Value V=VT0*(1-f*abs(V(M))/{VT0})
SYMATTR InstName VT
SYMBOL diode 80 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Dp1
SYMATTR Value DiodeNRD
SYMBOL res -16 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs1
SYMATTR Value 600Meg
SYMBOL Misc/signal -512 1296 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA1
SYMATTR Value PULSE(0 {V} 100 0.03 0.03 0.25 0.5 200)
SYMBOL res -304 1296 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL bv -400 1072 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -45 -54 VBottom 2
SYMATTR InstName Rh2
SYMATTR Value V=abs(I(Rh2))*(0.75k*abs((V(VA1)-V(gs))/{V}))
SYMBOL bv -288 960 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -91 127 VTop 2
SYMATTR InstName Rh3
SYMATTR Value V=abs(I(Rh3))*(0.75k*abs((-V(VA1)+V(gs))/{abs(V)}))
SYMBOL diode -416 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp4
SYMATTR Value DiodeNRD2
SYMBOL diode -480 1088 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp5
SYMATTR Value DiodeNRD2
SYMBOL res -224 1248 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL Misc/signal 144 1296 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA2
SYMATTR Value PULSE(0 {V} 200 0.03 0.03 0.25 0.5 200)
SYMBOL res 352 1296 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL bv 256 1072 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -45 -24 VBottom 2
SYMATTR InstName Rh4
SYMATTR Value V=abs(I(Rh4))*(1k*abs((V(VA2)-V(gs))/{V}))
SYMBOL bv 368 960 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -91 85 VTop 2
SYMATTR InstName Rh5
SYMATTR Value V=abs(I(Rh5))*(1k*abs((-V(VA2)+V(gs))/{abs(V)}))
SYMBOL diode 240 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp6
SYMATTR Value DiodeNRD2
SYMBOL diode 176 1088 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp7
SYMATTR Value DiodeNRD2
SYMBOL res 432 1248 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL Misc/signal 848 1312 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA3
SYMATTR Value PULSE(0 {V} 300 0.03 0.03 0.25 0.5 200)
SYMBOL res 1056 1312 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL bv 960 1088 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -67 21 VBottom 2
SYMATTR InstName Rh6
SYMATTR Value V=abs(I(Rh6))*(1.25k*abs((V(VA3)-V(gs))/{V}))
SYMBOL bv 1072 976 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -105 67 VTop 2
SYMATTR InstName Rh7
SYMATTR Value V=abs(I(Rh7))*(1.25k*abs((-V(VA3)+V(gs))/{abs(V)}))
SYMBOL diode 944 960 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp8
SYMATTR Value DiodeNRD2
SYMBOL diode 880 1104 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp9
SYMATTR Value DiodeNRD2
SYMBOL res 1136 1264 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL Misc/signal -1264 1296 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA4
SYMATTR Value PULSE(0 {V} 0 0.03 0.03 0.25 0.5 200)
SYMBOL res -1056 1296 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL bv -1152 1072 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -48 -54 VBottom 2
SYMATTR InstName Rh1
SYMATTR Value V=abs(I(Rh1))*(0.5k*abs((V(VA4)-V(gs))/{V}))
SYMBOL bv -1040 960 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -78 135 VTop 2
SYMATTR InstName Rh8
SYMATTR Value V=abs(I(Rh8))*(0.5k*abs((-V(VA4)+V(gs))/{abs(V)}))
SYMBOL diode -1168 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp2
SYMATTR Value DiodeNRD2
SYMBOL diode -1232 1088 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp3
SYMATTR Value DiodeNRD2
SYMBOL res -976 1248 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL sw -1600 976 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL Misc/signal 1552 1312 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA5
SYMATTR Value PULSE(0 {V} 400 0.03 0.03 0.25 0.5 200)
SYMBOL res 1760 1312 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL bv 1664 1088 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -48 5 VBottom 2
SYMATTR InstName Rh9
SYMATTR Value V=abs(I(Rh9))*(1.5k*abs((V(VA5)-V(gs))/{V}))
SYMBOL bv 1776 976 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -94 50 VTop 2
SYMATTR InstName Rh10
SYMATTR Value V=abs(I(Rh12))*(1.5k*abs((-V(VA5)+V(gs))/{abs(V)}))
SYMBOL diode 1648 960 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp10
SYMATTR Value DiodeNRD2
SYMBOL diode 1584 1104 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp11
SYMATTR Value DiodeNRD2
SYMBOL res 1840 1264 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL voltage 624 2000 R0
SYMATTR InstName Vd1
SYMATTR Value 0.5V
SYMBOL bi 304 2112 R0
WINDOW 3 30 110 Left 2
SYMATTR Value I=if (V(gs1)-V(T1)>V(ds1),  Km*(2*(V(gs1)-V(T1))-V(ds1))*V(ds1), (if ( V(gs1)>V(T1), Km*(V(gs1)-V(T1))*(V(gs1)-V(T1)), 0)))
SYMATTR InstName Id1
SYMBOL cap -16 2128 R0
SYMATTR InstName C3
SYMATTR Value {c1}
SYMBOL cap -16 2304 R0
SYMATTR InstName C4
SYMATTR Value {c2}
SYMBOL diode -96 2016 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName Dp12
SYMATTR Value DiodeNRD
SYMBOL res -128 1984 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs2
SYMATTR Value 400Meg
SYMBOL res 96 2096 R0
SYMATTR InstName Rr1
SYMATTR Value 29Meg
SYMBOL res 96 2272 R0
SYMATTR InstName RM1
SYMATTR Value 300Meg
SYMBOL bv -208 2288 R0
WINDOW 3 -1 131 Left 2
SYMATTR Value V=VT0*(1-f*abs(V(M1))/{VT0})
SYMATTR InstName VT1
SYMBOL diode -32 1872 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Dp13
SYMATTR Value DiodeNRD
SYMBOL res -128 1872 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs3
SYMATTR Value 600Meg
SYMBOL Misc/signal -624 3152 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA6
SYMATTR Value PULSE(0 {V1} 100 0.03 0.03 0.25 0.5 200)
SYMBOL res -416 3152 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL bv -512 2928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -60 -28 VBottom 2
SYMATTR InstName Rh11
SYMATTR Value V=abs(I(Rh11))*(0.75k*abs((V(VA6)-V(gs1))/{V1}))
SYMBOL bv -400 2816 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -91 94 VTop 2
SYMATTR InstName Rh12
SYMATTR Value V=abs(I(Rh12))*(0.75k*abs((-V(VA6)+V(gs1))/{abs(V1)}))
SYMBOL diode -528 2800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp14
SYMATTR Value DiodeNRD2
SYMBOL diode -592 2944 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp15
SYMATTR Value DiodeNRD2
SYMBOL res -336 3104 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL Misc/signal 32 3152 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA7
SYMATTR Value PULSE(0 {V1} 200 0.03 0.03 0.25 0.5 200)
SYMBOL res 240 3152 R0
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL bv 144 2928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -62 13 VBottom 2
SYMATTR InstName Rh13
SYMATTR Value V=abs(I(Rh13))*(1k*abs((V(VA7)-V(gs1))/{V1}))
SYMBOL bv 256 2816 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -89 35 VTop 2
SYMATTR InstName Rh14
SYMATTR Value V=abs(I(Rh14))*(1k*abs((-V(VA7)+V(gs1))/{abs(V)}))
SYMBOL diode 128 2800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp16
SYMATTR Value DiodeNRD2
SYMBOL diode 64 2944 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp17
SYMATTR Value DiodeNRD2
SYMBOL res 320 3104 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL Misc/signal 736 3168 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA8
SYMATTR Value PULSE(0 {V1} 300 0.03 0.03 0.25 0.5 200)
SYMBOL res 944 3168 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL bv 848 2944 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -54 38 VBottom 2
SYMATTR InstName Rh15
SYMATTR Value V=abs(I(Rh15))*(1.25k*abs((V(VA8)-V(gs1))/{V1}))
SYMBOL bv 960 2832 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -90 16 VTop 2
SYMATTR InstName Rh16
SYMATTR Value V=abs(I(Rh16))*(1.25k*abs((-V(VA8)+V(gs1))/{abs(V)}))
SYMBOL diode 832 2816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp18
SYMATTR Value DiodeNRD2
SYMBOL diode 768 2960 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp19
SYMATTR Value DiodeNRD2
SYMBOL res 1024 3120 R0
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL Misc/signal -1376 3152 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA9
SYMATTR Value PULSE(0 {V1} 0 0.03 0.03 0.25 0.5 200)
SYMBOL res -1168 3152 R0
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL bv -1264 2928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -53 -46 VBottom 2
SYMATTR InstName Rh17
SYMATTR Value V=abs(I(Rh17))*(0.5k*abs((V(VA9)-V(gs1))/{V1}))
SYMBOL bv -1152 2816 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -100 110 VTop 2
SYMATTR InstName Rh18
SYMATTR Value V=abs(I(Rh18))*(0.5k*abs((-V(VA9)+V(gs1))/{abs(V)}))
SYMBOL diode -1280 2800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp20
SYMATTR Value DiodeNRD2
SYMBOL diode -1344 2944 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp21
SYMATTR Value DiodeNRD2
SYMBOL res -1088 3104 R0
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL Misc/signal 1440 3168 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA10
SYMATTR Value PULSE(0 {V1} 400 0.03 0.03 0.25 0.5 200)
SYMBOL res 1648 3168 R0
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL bv 1552 2944 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -50 83 VBottom 2
SYMATTR InstName Rh19
SYMATTR Value V=abs(I(Rh19))*(1.5k*abs((V(VA10)-V(gs1))/{V1}))
SYMBOL bv 1664 2832 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -88 -23 VTop 2
SYMATTR InstName Rh20
SYMATTR Value V=abs(I(Rh20))*(1.5k*abs((-V(VA10)+V(gs1))/{abs(V)}))
SYMBOL diode 1536 2816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp22
SYMATTR Value DiodeNRD2
SYMBOL diode 1472 2960 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp23
SYMATTR Value DiodeNRD2
SYMBOL res 1728 3120 R0
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL csw 3296 1152 R0
SYMATTR InstName W2
SYMATTR Value VId1 MCSW
SYMBOL voltage 3888 128 R0
SYMATTR InstName Vd2
SYMATTR Value 0.5V
SYMBOL bi 3568 240 R0
WINDOW 3 -76 -145 Left 2
SYMATTR InstName Id2
SYMATTR Value I=if (V(gs2)-V(T2)>V(ds2),  Km*(2*(V(gs2)-V(T2))-V(ds2))*V(ds2), (if ( V(gs2)>V(T2), Km*(V(gs2)-V(T2))*(V(gs2)-V(T2)), 0)))
SYMBOL cap 3248 256 R0
SYMATTR InstName C5
SYMATTR Value {c1}
SYMBOL cap 3248 432 R0
SYMATTR InstName C6
SYMATTR Value {c2}
SYMBOL diode 3168 144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName Dp24
SYMATTR Value DiodeNRD
SYMBOL res 3136 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs4
SYMATTR Value 400Meg
SYMBOL res 3360 224 R0
SYMATTR InstName Rr2
SYMATTR Value 29Meg
SYMBOL res 3360 400 R0
SYMATTR InstName RM2
SYMATTR Value 300Meg
SYMBOL bv 3056 416 R0
WINDOW 3 -1 131 Left 2
SYMATTR Value V=VT0*(1-f*abs(V(M2))/{VT0})
SYMATTR InstName VT2
SYMBOL diode 3232 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Dp25
SYMATTR Value DiodeNRD
SYMBOL res 3136 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs5
SYMATTR Value 600Meg
SYMBOL Misc/signal 2640 1280 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA11
SYMATTR Value PULSE(0 {Vr} 0 0.03 0.03 0.25 0.5 1000)
SYMBOL res 2848 1280 R0
SYMATTR InstName R23
SYMATTR Value 1k
SYMBOL bv 2752 1056 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -42 0 VBottom 2
SYMATTR InstName Rh21
SYMATTR Value V=abs(I(Rh21))*(0.5k*abs((V(VA11)-V(gs2))/{Vr}))
SYMBOL bv 2864 944 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -99 137 VTop 2
SYMATTR InstName Rh22
SYMATTR Value V=abs(I(Rh22))*(0.5k*abs((-V(VA11)+V(gs2))/{abs(Vr)}))
SYMBOL diode 2736 928 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp26
SYMATTR Value DiodeNRD2
SYMBOL diode 2672 1072 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp27
SYMATTR Value DiodeNRD2
SYMBOL res 2928 1232 R0
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL Misc/signal 3296 1280 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA12
SYMATTR Value PULSE(0 {V2} 0 0.03 0.03 0.25 0.5 1000)
SYMBOL res 3504 1280 R0
SYMATTR InstName R25
SYMATTR Value 1k
SYMBOL bv 3408 1056 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -37 55 VBottom 2
SYMATTR InstName Rh23
SYMATTR Value V=abs(I(Rh23))*(1.25k*abs((V(VA12)-V(gs2))/{V}))
SYMBOL bv 3520 944 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -92 5 VTop 2
SYMATTR InstName Rh24
SYMATTR Value V=abs(I(Rh24))*(1.25k*abs((-V(VA12)+V(gs2))/{abs(V)}))
SYMBOL diode 3392 928 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 26 31 VTop 2
SYMATTR InstName Dp28
SYMATTR Value DiodeNRD2
SYMBOL diode 3328 1072 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 7 32 VBottom 2
SYMATTR InstName Dp29
SYMATTR Value DiodeNRD2
SYMBOL res 3584 1232 R0
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL csw 2640 1152 R0
SYMATTR InstName W1
SYMATTR Value VId MCSW
SYMBOL res 400 384 R0
SYMATTR InstName R0
SYMATTR Value 1
SYMBOL res 288 2240 R0
SYMATTR InstName R10
SYMATTR Value 1
SYMBOL csw 4128 240 R0
WINDOW 3 29 91 Left 2
SYMATTR InstName W3
SYMATTR Value VId2 MCSW
SYMBOL Misc/signal 4128 368 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA13
SYMATTR Value PULSE(0 {V2} 0 0.03 0.03 0.25 0.5 1000)
SYMBOL res 3552 352 R0
SYMATTR InstName R22
SYMATTR Value 1
SYMBOL res 4336 272 R0
SYMATTR InstName R27
SYMATTR Value 1Meg
SYMBOL csw 1008 256 R0
WINDOW 3 36 72 Left 2
SYMATTR InstName W4
SYMATTR Value VId MCSW
SYMBOL Misc/signal 1008 384 R0
WINDOW 0 -101 33 Left 2
WINDOW 3 -166 103 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA14
SYMATTR Value PULSE(0 {V2} 0 0.03 0.03 0.25 0.5 1000)
SYMBOL res 1216 288 R0
SYMATTR InstName R28
SYMATTR Value 1Meg
TEXT -1640 -16 Left 2 !;tran 0 600s 0
TEXT -1640 -72 Left 2 !.param Vr=-3 V=9 V1=9 V2=9
TEXT -1632 -424 Left 2 !.model DiodeNRD D (Ron=.1 Roff=100T Vfwd=0.3)
TEXT -1640 -168 Left 2 !.params W=50e-9 L=8e-6 d= 30e-9 mun=0.08 lambda=0.03
TEXT -1632 -344 Left 2 !.param VT0=0.28V
TEXT -1640 -128 Left 2 !.param cgsm=c1*c2/(c1+c2)  Km=(1/2)*8*(W/L)*mun*cgsm/(L*L)
TEXT -1632 -304 Left 2 !.param f=.1
TEXT -1632 -264 Left 2 !.params c1=0.0000009u c2=.7u
TEXT -1632 -392 Left 2 !.model DiodeNRD2 D (Ron=.1 Roff=100T Vfwd=0)
TEXT -1640 56 Left 2 !.model MYSW SW(Ron=1 Roff=100Meg Vt=0.3 Vh=0)
TEXT -1792 1224 Left 2 ;SOMA
TEXT -1640 96 Left 2 !.model MCSW CSW(Ron=0.1 Roff=1000Meg It=.5u Ih=0)
TEXT 2680 1208 Left 2 !VId R0 0
TEXT 3336 1208 Left 2 !VId1 R10 0
TEXT 4168 296 Left 2 !VId2 R22 0
TEXT -1424 840 Left 2 ;Silent synapse
TEXT -112 -112 Left 2 ;Neuron 1 (N1)
TEXT 456 296 Left 2 ;IDS,N1
TEXT 1080 168 Left 2 ;VB,N1
TEXT -40 1712 Left 2 ;Neuron 2' (N2')
TEXT -1560 3104 Left 2 ;SOMA
TEXT 344 2152 Left 2 ;IDS,N2
TEXT 2624 816 Left 2 ;Inhibitory synapse
TEXT 3304 -104 Left 2 ;Neuron 2 (N2)
TEXT 3608 280 Left 2 ;IDS,N2
TEXT 4208 152 Left 2 ;VB,N2
TEXT -1864 -344 Left 2 ;Transistor Vth,0
TEXT -2008 -168 Left 2 ;Transistor device parameters
TEXT -1920 -264 Left 2 ;Sol-gel film parameters
TEXT -1928 -72 Left 2 ;Input pulse amplitudes
TEXT -1960 56 Left 2 ;voltage-dependent switch
TEXT -1960 96 Left 2 ;current-dependent switch
